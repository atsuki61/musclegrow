# MuscleGrow グローバル開発ガイド

## 📌 このドキュメントについて

このドキュメントは、MuscleGrow アプリの開発時に参照すべきグローバルな情報をまとめています。

---

## 🗄️ データベース情報の確認方法

### MCP（Model Context Protocol）を使用したデータベース確認

データベースの情報（テーブル構造、データ、マイグレーションなど）を確認したい場合は、**Supabase MCP サーバー**を使用してください。

#### 利用可能な MCP 機能

以下の MCP 機能を使用してデータベース情報を確認できます：

1. **テーブル一覧の取得**

   - `mcp_supabase_list_tables` - データベース内のすべてのテーブル一覧を取得
   - スキーマを指定してテーブルをフィルタリング可能

2. **SQL 実行**

   - `mcp_supabase_execute_sql` - データベースに対して SQL クエリを実行
   - データの確認、集計、検証などに使用

3. **マイグレーション管理**

   - `mcp_supabase_list_migrations` - 適用済みマイグレーションの一覧を取得
   - `mcp_supabase_apply_migration` - 新しいマイグレーションを適用

4. **拡張機能の確認**

   - `mcp_supabase_list_extensions` - データベースにインストールされている拡張機能の一覧を取得

5. **ログの確認**

   - `mcp_supabase_get_logs` - 各種サービスのログを取得（API、Postgres、Auth、Storage など）

6. **アドバイザーの確認**
   - `mcp_supabase_get_advisors` - セキュリティやパフォーマンスに関するアドバイスを取得

#### 使用例

データベースのテーブル構造を確認したい場合：

```
「Supabase MCPを使用してテーブル一覧を取得してください」
「mcp_supabase_list_tablesを使用してpublicスキーマのテーブルを確認してください」
```

データベースのデータを確認したい場合：

```
「Supabase MCPを使用してSQLを実行し、usersテーブルのデータを確認してください」
「mcp_supabase_execute_sqlを使用して、最新のトレーニングセッションを取得してください」
```

#### 注意事項

- **DDL 操作（テーブル作成・変更）**: `mcp_supabase_apply_migration` を使用してください
- **DML 操作（データの挿入・更新・削除）**: `mcp_supabase_execute_sql` を使用できますが、本番環境では注意が必要です
- **RLS ポリシー**: データベースの Row Level Security（RLS）ポリシーが有効な場合、ユーザーごとにデータが分離されます

---

## 🔧 開発時の推奨フロー

1. **データベース構造の確認**: MCP を使用してテーブル一覧やスキーマを確認
2. **データの確認**: SQL クエリを実行して実際のデータを確認
3. **問題の診断**: ログやアドバイザーを確認して問題を特定
4. **修正の適用**: 必要に応じてマイグレーションを適用

---

## 💡 ヒント

- データベースの情報を確認する際は、まず `mcp_supabase_list_tables` でテーブル構造を把握してから、必要に応じて SQL クエリを実行することを推奨します
- セキュリティやパフォーマンスの問題を早期に発見するため、定期的に `mcp_supabase_get_advisors` を実行することを推奨します
